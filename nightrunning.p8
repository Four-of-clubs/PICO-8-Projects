pico-8 cartridge // http://www.pico-8.com
version 32
__lua__

function _init()
stars = {}
leye = 0
buildings_lower = {}
buildings_upper = {}
building_distance = 10

//building id,width,hight
bidx = {31,8,17,90,103,44}
bidy = {25,14,7,13,13,3}
bidw = {12,9,14,11,14,12}

speed = 0
groundx = 0
hillx = 0


for i=1,50 do
 add(stars, {
 x = rnd(128),
 y = rnd(80),
 v = 1+rnd(2)
 })
end

for i=0,10 do
 add(buildings_lower, {
 x = i*14,
 id = flr(rnd(count(bidx)-2))+1,
 })
end
 
for i=0,10 do
 add(buildings_upper, {
 x = i*14+6,
 id = flr(rnd(count(bidx)-1))+2,
 })
end

end

function _update60()
groundx+=(speed/1.5)
hillx += (speed/3)

//leye = 5*speed
 
 for i in all(stars) do
  i.x -= (speed/2)*(i.v+2)
  i.x = (i.x)%128
 end
 
 for i in all(buildings_lower) do
  i.x -= (speed/4)
  if i.x <=-15 then
   i.x = ((i.x)%140)+14
  end
  if i.x > 140 and speed<0 then
  	i.x = ((i.x)%140)-14
  end
 end
 
 for i in all(buildings_upper) do
  i.x -= (speed/4)
  if i.x <=-15 then
   i.x = ((i.x)%140)+14
  end
  if i.x > 140 and speed<0 then
  	i.x = ((i.x)%140)-14
  end
 end
 
 if btn(1) then
  speed += .007
 end
 
 if btn(0) then
  speed -= .007
 end
 
 if btn(2) then
  speed = 0
 end
end

function _draw()
cls()

//road?
rectfill(0,85,128,98,1)

//stars
len = speed*3
for i in all(stars) do
 line(i.x,i.y,i.x+len,i.y,7)
end

//upper buildings
for i in all(buildings_upper) do
 sspr(bidx[i.id],bidy[i.id],
 bidw[i.id],32-bidy[i.id],
 i.x,90-(32-bidy[i.id]))
end

//lower buildings
for i in all(buildings_lower) do
 sspr(bidx[i.id],bidy[i.id],
 bidw[i.id],32-bidy[i.id],
 i.x,98-(32-bidy[i.id]))
end

//low hill things
for i=0,5 do
  sspr(56,2,29,5,
  ((29*i-hillx)%174)-29,95)
end

//ground 
for i=0,16 do
 spr(20,i*8-(groundx%8),100)
 for s=0,4 do
  spr(36,i*8-(groundx%8),108+(s*8))
 end
end
 
 
//railing
 --[[
 pal(8,0)
 for i=0,3 do
  sspr(80,33,17,14,
  290-(groundx%400)+(i*17),86)
  sspr(80,33,2,14,
  290-(groundx%400)+(4*17),86)
 end
 pal()
 
  if (flr(time()*6)%16) != 0
 --and (flr(time()*6)%12) != 3
  then
  palt(10,true)
  pal(10,13)
 end
 
 --lamp
 lampx = groundx%400
 sspr(26,32,21,28,(148-lampx),86)
 palt()
 
 rectfill(159-lampx,65,
 156-lampx,85,6)
 
 
 sspr(48,32,7,8,(153-lampx),57)
 pal()
 ]]--
 
 
 //rude bunny
 pal(8,0)
 sspr(5,32,18,32,
 (30-groundx),75)
 //line((28-groundx),83,
 //(28-groundx+leye),83,14)
 pal()

--print(stat(7))


end
__gfx__
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000005550000000022200000003300000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000008800000002225555003330222220000033330000000000000000000000000000000000000000000
000770000000000000000000000000000000000000000000dddd0000322222555533333232222055333333000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000dd55dd000322222225533333333222553333333000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000dddddddd00332222255553333333225553333333000000000000000000000000000000000000000000
000000000000000004ddddddddd4000000000000000000dd5555dd00332222255555333332255555333333000000000000000000000000000000000000000000
00000000000000000ddddddddddd55406666666600000dddddddddd0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000ddaaadaaadd55501116111100000ddadaadadd0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000ddddddddddd5a501161111100000daadaadaad0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000ddddddddddd5a501161111100000daadaadaad0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000ddaaadaaadd55501611111100000daadaadaad0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000ddddddddddd5a501611111100000dddddddddd000000000000000000000000000000000000000ddd0000000000055550000000000000000
00000000455555540ddddddddddd5a506111111100000dddddddddd0000000000000000000000000000000000000ddaaadd00000005500005500000000000000
000000005aa555555ddaaadaaadd55506666666600000dddddddddd000000000000000000000000000000000000daaaaaaad0000050770000050000000000000
0000000055555aa55ddddddddddd55505555555500000daadaadaad00000000000000000000000000000000000daaa555aaad000500700000005000000000000
00000000555555555ddddddddddd5a505555555500000daadaadaad00000000000000000000000000000000000daa55555aad000500000003005000000000000
000000005aa555555ddaaadaaadd5a505555555500000daadaadaad00000000000000000000000000000000000ddd55555ddd005033833300383500000000000
0000000055555aa55ddddddddddd55505555555500000daadaadaad00000000000000000000000000000000000ddd55555ddd00533c333338333500000000000
00000000555555555ddddddddddd5a505555555500000dddddddddd00000000000000000000000000000000000daaa55aaadd005555333c33555500000000000
000000005aa555555ddaaadaaadd5a505555555500000dddddddddd00000000000000000000000000000000000ddaa555aadd005dd55555555dd500000000000
0000000055555aa55ddddddddddd55505555555500000dddddddddd00000000000000000000000000000000000ddd55555ddd0005ddd5665ddd5000000000000
00000000555555555ddddddddddd55505555555500000daadaadaad00000000000000000000000000000000000ddaa555aadd0005ddd5665ddd5000000000000
000000005aa555555ddaaadaaadd5a500000000000000daadaadaad00000000000000000000000000000000000ddaa555aadd00005dd5665dd50000000000000
0000000055555aa55ddddddddddd5a500444444440000daadaadaad00000000000000000000000000000000000ddd55555ddd00005dd5665dd50000000000000
00000000555555555ddddddddddd55504444444444000daadaadaad00000000000000000000000000000000000ddaa555aadd000005d5665d500000000000000
000000005aa555555ddaaadaaadd5a504aaa66aaa4000dddddddddd00000000000000000000000000000000000ddaaa55aaad000005d5665d500000000000000
0000000055555aa55ddddddddddd5a544aaa66aaa4400dddddddddd00000000000000000000000000000000000ddd55555ddd000005d5665d500000000000000
00000000555555555ddddddddddd555066a6666a66000daaaddaaad00000000000000000000000000000000000ddd5aaa5ddd00005dd5555dd50000000000000
00000000555555555ddddddddddd55506666776666000daaddddaad00000000000000000000000000000000000dd55aaa55dd0005ddd5665ddd5000000000000
00000000555555555ddddddddddd5550666677666600dddddddddddd0000000000000000000000000000000000dd5aaaaa5dd005555556655555500000000000
00000008800000000000000000000000006666000000000066666550000000880000000000000000000000000000000000000000000000000000000000000000
00000085580000000000000000000000006666000000000066666560000008558000000000000000760000000000000000000000000000000000000000000000
0000087755800000000000000000000000666600000000000aaa5560000087755800000000000000660000000000000000000000000000000000000000000000
00000877665800000000000000000000006666000000000000066660000087766580000000000000550000000000000000000000000000000000000000000000
00000087765888000000000000000000006666000000000000066660000008776588800000000000885500000000000550000000000000000000000000000000
00000008766666800000000000000000006666000000000000066660000000876666680000000000880055500000555000000000000000000000000000000000
00000008766666680000000000000000006666000000000000066660000000876666668000000000880000055555000000000000000000000000000000000000
00000087766555668000000000000000006666000000000000066660000008776655566800000000880000000000000000000000000000000000000000000000
00000087666522668000000000000000006666000000000000000000000008766652e66800000000880000000000000000000000000000000000000000000000
0000008766652e668000000000000000006666000000000000000000000008766652266800080000880000000000000000000000000000000000000000000000
00000087666555668000000000000000006666000000000000000000000008766655566800868000880000000000000000000000000000000000000000000000
00000087766666680000000000000000006666000000000000000000000008776666668008668000880000000000000000000000000000000000000000000000
0000000877666680000000000000000005566550000000000000000000000087766668008e768000880000000000000000000000000000000000000000000000
000000008766680000000000000000005555555500000000000000000000000876668008e2280000880000000000000000000000000000000000000000000000
0000000008888000000000000000000055aaaa5500000000000000000000000088880008e2280000880000000000000000000000000000000000000000000000
0000000088e28800000000000000000aaaaaaaaaa000000000000000000000088e28888e22800000000000000000000000000000000000000000000000000000
00000008eee2228000000000000000aaaaaaaaaaaa000000000000000000008eee2228e228000000000000000000000000000000000000000000000000000000
00000008e22222800000000000000aaaaaaaaaaaaaa00000000000000000008e2222282280000000000000000000000000000000000000000000000000000000
00000008e22222800000000000000aaaaaaaaaaaaaa00000000000000000008e2222282800000000000000000000000000000000000000000000000000000000
00000008e222228000000000000000aaaaaaaaaaaa000000000000000000008e2222288000000000000000000000000000000000000000000000000000000000
00000008e2222280000000000000000aaaaaaaaaa0000000000000000000008e2222280000000000000000000000000000000000000000000000000000000000
00000008ee22228000000000000000000aaaaaa000000000000000000000008ee222280000000000000000000000000000000000000000000000000000000000
000000008ee82280000000000000000000000000000000000000000000000008ee82280000000000000000000000000000000000000000000000000000000000
00000008e882228000000000000000000000000000000000000000000000008e8822280000000000000000000000000000000000000000000000000000000000
000000086ddddd80000000000000000000000000000000000000000000000086ddddd80000000000000000000000000000000000000000000000000000000000
000000086ddddd80000000000000000000000000000000000000000000000086ddddd80000000000000000000000000000000000000000000000000000000000
000000086dd8dd80000000000000000000000000000000000000000000000086dd8dd80000000000000000000000000000000000000000000000000000000000
000000086dd8dd80000000000000000000000000000000000000000000000086dd8dd80000000000000000000000000000000000000000000000000000000000
000000086d88d880000000000000000000000000000000000000000000000086d88d880000000000000000000000000000000000000000000000000000000000
00000008e288228000000000000000000000000000000000000000000000008e2882280000000000000000000000000000000000000000000000000000000000
00000008222822280000000000000000000000000000000000000000000000822282228000000000000000000000000000000000000000000000000000000000
00000000888188800000000000000000000000000000000000000000000000088818880000000000000000000000000000000000000000000000000000000000
__sfx__
011800001102013020110200000011020000001102014020180201702018020000001802000000100200000011020130201102000000110200000011020140201802017020180200000018020000001002000000
01180000110201402017020000001702000000180201b0201c0201b0001c020000001c020000001c0201b0201c020000000000000000000000000000000000000000000000000000000000000000000000000000
011800001c5001c510000001d51020510235102451024510245102451000500235102451023510245102451021510005002151024510285102751000500275200050027520005002752000500275252700000000
011800000050000500005001c5101d5101d5101d51000500005001c5101d5101c5001d5001f5101d5101a5101b5101c510005001d510005001d510005001d5101f5101f510005001951018510195101b5101c510
__music__
01 00034344
01 00024344
00 01424344

